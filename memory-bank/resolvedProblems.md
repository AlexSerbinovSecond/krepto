# –í–∏—Ä—ñ—à–µ–Ω—ñ –ü—Ä–æ–±–ª–µ–º–∏ - Krepto Development

## üîß –ü—Ä–æ–±–ª–µ–º–∞ #1: Genesis –ë–ª–æ–∫ CheckProofOfWork –ü–æ–º–∏–ª–∫–∞ –≤ Mainnet

**–î–∞—Ç–∞**: 26 —Ç—Ä–∞–≤–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–ò–†–Ü–®–ï–ù–û  
**–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å**: –í–∏—Å–æ–∫–∞ (4+ –≥–æ–¥–∏–Ω–∏ —Ä–æ–∑—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è)

### –û–ø–∏—Å –ü—Ä–æ–±–ª–µ–º–∏

–ü—Ä–∏ —Å–ø—Ä–æ–±—ñ –∑–∞–ø—É—Å–∫—É Krepto –≤ mainnet —Ä–µ–∂–∏–º—ñ –¥–µ–º–æ–Ω –Ω–µ –º—ñ–≥ –∑–∞–ø—É—Å—Ç–∏—Ç–∏—Å—è —á–µ—Ä–µ–∑ –ø–æ–º–∏–ª–∫—É –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ Proof of Work –¥–ª—è genesis –±–ª–æ–∫—É.

#### –°–∏–º–ø—Ç–æ–º–∏
```
LoadBlockIndexGuts: CheckProofOfWork failed: CBlockIndex(pprev=0x0, nHeight=0, merkle=5976614bb121054435ae20ef7100ecc07f176b54a7bf908493272d716f8409b4, hashBlock=5e5d3365087e5962e40030aa9e43231c24f4057ddfbacb069fb19cfc935c23c9)
```

#### –ü–æ—á–∞—Ç–∫–æ–≤—ñ –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ (–ü—Ä–æ–±–ª–µ–º–Ω—ñ)
- **Genesis hash**: `5e5d3365087e5962e40030aa9e43231c24f4057ddfbacb069fb19cfc935c23c9`
- **nonce**: 0
- **nBits**: 0x1d00ffff (Bitcoin —Å—Ç–∞–Ω–¥–∞—Ä—Ç)
- **powLimit**: `00000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffff`

### –ü—Ä–∏—á–∏–Ω–∞ –ü—Ä–æ–±–ª–µ–º–∏

**–û—Å–Ω–æ–≤–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞**: –ù–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å –º—ñ–∂ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—é genesis –±–ª–æ–∫—É —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏ –º–µ—Ä–µ–∂—ñ.

1. **Genesis –±–ª–æ–∫ –∑ nonce=0** –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏–≤ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É CheckProofOfWork –¥–ª—è mainnet
2. **powLimit –≤ –∫–æ–¥—ñ** –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–≤ **nBits –≤ genesis –±–ª–æ—Ü—ñ**
3. **–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –±—É–ª–∞ –∑–∞–Ω–∞–¥—Ç–æ –≤–∏—Å–æ–∫–∞** –¥–ª—è —à–≤–∏–¥–∫–æ—ó –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó

### –ö—Ä–æ–∫–∏ –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

#### 1. –ü–µ—Ä—à–∞ –°–ø—Ä–æ–±–∞ - –ó–º—ñ–Ω–∞ powLimit
```cpp
// –ó–º—ñ–Ω–µ–Ω–æ –≤ src/chainparams.cpp
consensus.powLimit = uint256S("7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–º–∏–ª–∫–∞ –∑–∞–ª–∏—à–∏–ª–∞—Å—è

#### 2. –î—Ä—É–≥–∞ –°–ø—Ä–æ–±–∞ - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑ –ü—Ä–æ—Å—Ç–æ—é –°–∫–ª–∞–¥–Ω—ñ—Å—Ç—é
```bash
cd /Users/serbinov/Desktop/projects/upwork/GenesisH0
python genesis.py -z "Crypto is now Krepto" -n 0 -t 1748270717 -b 0x207fffff
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ú–∏—Ç—Ç—î–≤–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑ nonce=0, –∞–ª–µ —Å—Ç–≤–æ—Ä–∏–ª–∞ –Ω–æ–≤—É –Ω–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å

#### 3. –¢—Ä–µ—Ç—è –°–ø—Ä–æ–±–∞ - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑ Bitcoin –°–∫–ª–∞–¥–Ω—ñ—Å—Ç—é
```bash
python genesis.py -z "Crypto is now Krepto" -n 0 -t 1748270717 -b 0x1d00ffff
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: 648998 hash/s, –æ—Ü—ñ–Ω–∫–∞ 1.8 –≥–æ–¥–∏–Ω–∏ - –∑–∞–Ω–∞–¥—Ç–æ –¥–æ–≤–≥–æ

### –û—Å—Ç–∞—Ç–æ—á–Ω–µ –†—ñ—à–µ–Ω–Ω—è

#### –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑ –ü–æ–º—ñ—Ä–Ω–æ—é –°–∫–ª–∞–¥–Ω—ñ—Å—Ç—é
```bash
cd /Users/serbinov/Desktop/projects/upwork/GenesisH0
source ../venv/bin/activate
python genesis.py -z "Crypto is now Krepto" -n 0 -t 1748270717 -b 0x1e0ffff0
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç GenesisH0**:
```
nonce: 663656
genesis hash: 00000d2843e19d3f61aaf31f1f919a1be17fc1b814d43117f8f8a4b602a559f2
merkle hash: 5976614bb121054435ae20ef7100ecc07f176b54a7bf908493272d716f8409b4
```

#### –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ö–æ–¥—É
```cpp
// src/chainparams.cpp - CMainParams()
genesis.nTime = 1748270717;
genesis.nBits = 0x1e0ffff0;
genesis.nNonce = 663656;

consensus.hashGenesisBlock = uint256S("0x00000d2843e19d3f61aaf31f1f919a1be17fc1b814d43117f8f8a4b602a559f2");
consensus.powLimit = uint256S("00000fffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");
```

#### –î–æ–¥–∞—Ç–∫–æ–≤—ñ –ü—Ä–æ–±–ª–µ–º–∏ —Ç–∞ –†—ñ—à–µ–Ω–Ω—è

**RPC –ü–æ—Ä—Ç –ö–æ–Ω—Ñ–ª—ñ–∫—Ç**:
- **–ü—Ä–æ–±–ª–µ–º–∞**: "Unable to bind to 127.0.0.1:12346 on this computer"
- **–†—ñ—à–µ–Ω–Ω—è**: –ó–º—ñ–Ω–µ–Ω–æ RPC –ø–æ—Ä—Ç –∑ 12346 –Ω–∞ 12347 –≤ `/Users/serbinov/.krepto/bitcoin.conf`

### –§—ñ–Ω–∞–ª—å–Ω—ñ –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ (–†–æ–±–æ—á—ñ)

```cpp
// Genesis –±–ª–æ–∫
genesis.nTime = 1748270717;
genesis.nBits = 0x1e0ffff0;
genesis.nNonce = 663656;
consensus.hashGenesisBlock = uint256S("0x00000d2843e19d3f61aaf31f1f919a1be17fc1b814d43117f8f8a4b602a559f2");

// –ú–µ—Ä–µ–∂–µ–≤—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
consensus.powLimit = uint256S("00000fffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");
nDefaultPort = 12345;
```

```ini
# /Users/serbinov/.krepto/bitcoin.conf
rpcport=12347
port=12345
```

### –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è –ü–µ—Ä–µ–≤—ñ—Ä–∫–∏ –†—ñ—à–µ–Ω–Ω—è

```bash
# –ö–æ–º–ø—ñ–ª—è—Ü—ñ—è
cd /Users/serbinov/Desktop/projects/upwork/krepto
make

# –û—á–∏—â–µ–Ω–Ω—è —Å—Ç–∞—Ä–∏—Ö –¥–∞–Ω–∏—Ö
rm -rf /Users/serbinov/.krepto/blocks
rm -rf /Users/serbinov/.krepto/chainstate

# –ó–∞–ø—É—Å–∫
./src/bitcoind -datadir=/Users/serbinov/.krepto -daemon

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞
./src/bitcoin-cli -datadir=/Users/serbinov/.krepto -rpcport=12347 getblockchaininfo
```

### –£—Å–ø—ñ—à–Ω–∏–π –†–µ–∑—É–ª—å—Ç–∞—Ç

```json
{
  "chain": "main",
  "blocks": 0,
  "headers": 0,
  "bestblockhash": "00000d2843e19d3f61aaf31f1f919a1be17fc1b814d43117f8f8a4b602a559f2",
  "difficulty": 0.000244140625,
  "time": 1748270717,
  "mediantime": 1748270717,
  "verificationprogress": 8.164180650992973e-10,
  "initialblockdownload": true,
  "chainwork": "0000000000000000000000000000000000000000000000000000000000100010",
  "size_on_disk": 244,
  "pruned": false,
  "warnings": []
}
```

### –ö–ª—é—á–æ–≤—ñ –£—Ä–æ–∫–∏

1. **GenesisH0 - –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ GenesisH0 –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó genesis –±–ª–æ–∫—ñ–≤ –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º nonce
2. **–ü–æ–º—ñ—Ä–Ω–∞ –°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å**: nBits `0x1e0ffff0` –∑–∞–±–µ–∑–ø–µ—á—É—î —à–≤–∏–¥–∫—É –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é (—Å–µ–∫—É–Ω–¥–∏) —Ç–∞ –≤–∞–ª—ñ–¥–Ω–∏–π PoW
3. **–í—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å powLimit**: powLimit –≤ –∫–æ–¥—ñ –ü–û–í–ò–ù–ï–ù –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ nBits –≤ genesis –±–ª–æ—Ü—ñ
4. **–û—á–∏—â–µ–Ω–Ω—è –î–∞–Ω–∏—Ö**: –ü—ñ—Å–ª—è –∑–º—ñ–Ω–∏ genesis –±–ª–æ–∫—É –ó–ê–í–ñ–î–ò –≤–∏–¥–∞–ª—è—Ç–∏ `blocks/` —Ç–∞ `chainstate/`
5. **RPC –ü–æ—Ä—Ç**: –ü–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å RPC –ø–æ—Ä—Ç—É –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

### –ê–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è –ú–∞–π–±—É—Ç–Ω—å–æ–≥–æ

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –∑ genesis –±–ª–æ–∫–æ–º:

1. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å**:
   - powLimit –≤ chainparams.cpp
   - nBits –≤ genesis –±–ª–æ—Ü—ñ
   - nonce != 0 –¥–ª—è mainnet

2. **–ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –Ω–æ–≤–∏–π –±–ª–æ–∫**:
   ```bash
   cd GenesisH0
   python genesis.py -z "YOUR_PHRASE" -n 0 -t TIMESTAMP -b 0x1e0ffff0
   ```

3. **–û–Ω–æ–≤–∏—Ç–∏ –∫–æ–¥**:
   - nonce –∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É GenesisH0
   - hashGenesisBlock –∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
   - powLimit –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ nBits

4. **–û—á–∏—Å—Ç–∏—Ç–∏ —Ç–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏**:
   ```bash
   rm -rf ~/.krepto/blocks ~/.krepto/chainstate
   make && ./src/bitcoind -daemon
   ```

5. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —É—Å–ø—ñ—Ö**:
   ```bash
   ./src/bitcoin-cli getblockchaininfo
   ```

### –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ —Ç–∞ –†–µ—Å—É—Ä—Å–∏

- **GenesisH0**: `/Users/serbinov/Desktop/projects/upwork/GenesisH0`
- **Python venv**: `/Users/serbinov/Desktop/projects/upwork/venv`
- **–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è**: `/Users/serbinov/.krepto/bitcoin.conf`
- **–õ–æ–≥–∏**: `/Users/serbinov/.krepto/debug.log`

**–ß–∞—Å –≤–∏—Ä—ñ—à–µ–Ω–Ω—è**: 4+ –≥–æ–¥–∏–Ω–∏  
**–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å**: –í–∏—Å–æ–∫–∞ (–ø–æ—Ç—Ä–µ–±—É–≤–∞–ª–∞ –≥–ª–∏–±–æ–∫–æ–≥–æ —Ä–æ–∑—É–º—ñ–Ω–Ω—è Krepto core)  
**–í–∞–∂–ª–∏–≤—ñ—Å—Ç—å**: –ö—Ä–∏—Ç–∏—á–Ω–∞ (–±–ª–æ–∫—É–≤–∞–ª–∞ –∑–∞–ø—É—Å–∫ mainnet)

---

## üîß –ü—Ä–æ–±–ª–µ–º–∞ #2: –ú–∞–π–Ω—ñ–Ω–≥ –ü–æ–≤–µ—Ä—Ç–∞—î –ü–æ—Ä–æ–∂–Ω—ñ–π –ú–∞—Å–∏–≤ []

**–î–∞—Ç–∞**: 26 —Ç—Ä–∞–≤–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–ò–†–Ü–®–ï–ù–û  
**–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å**: –°–µ—Ä–µ–¥–Ω—è (1 –≥–æ–¥–∏–Ω–∞ —Ä–æ–∑—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è)

### –û–ø–∏—Å –ü—Ä–æ–±–ª–µ–º–∏

–ü—Ä–∏ —Å–ø—Ä–æ–±—ñ –º–∞–π–Ω–∏—Ç–∏ –±–ª–æ–∫–∏ –≤ Krepto mainnet –∫–æ–º–∞–Ω–¥–∞ `generatetoaddress` —á–∞—Å—Ç–æ –ø–æ–≤–µ—Ä—Ç–∞–ª–∞ –ø–æ—Ä–æ–∂–Ω—ñ–π –º–∞—Å–∏–≤ `[]` –∑–∞–º—ñ—Å—Ç—å —Ö–µ—à—ñ–≤ –Ω–æ–≤–∏—Ö –±–ª–æ–∫—ñ–≤. –¶–µ —Å—Ç–≤–æ—Ä—é–≤–∞–ª–æ –≤—Ä–∞–∂–µ–Ω–Ω—è, —â–æ –º–∞–π–Ω—ñ–Ω–≥ –Ω–µ –ø—Ä–∞—Ü—é—î –∞–±–æ –ø—Ä–∞—Ü—é—î –Ω–µ—Å—Ç–∞–±—ñ–ª—å–Ω–æ.

#### –°–∏–º–ø—Ç–æ–º–∏
```bash
# –ö–æ–º–∞–Ω–¥–∏ –≤ GUI Debug Console
generatetoaddress 1 kr1qyd9fkjjacagwha4l4548q02glxt9w88rxpuyr3
[]  # –ü–æ—Ä–æ–∂–Ω—ñ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

generatetoaddress 1 kr1qyd9fkjjacagwha4l4548q02glxt9w88rxpuyr3
[
  "0000055a3b05241e770ee456d84fb2bb690b212d16db5ed657190a378ffce8d1"
]  # –Ü–Ω–æ–¥—ñ –ø—Ä–∞—Ü—é–≤–∞–ª–æ

generatetoaddress 1 kr1qyd9fkjjacagwha4l4548q02glxt9w88rxpuyr3
[]  # –ó–Ω–æ–≤—É –ø–æ—Ä–æ–∂–Ω—å–æ
```

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –£—Å–ø—ñ—à–Ω–æ—Å—Ç—ñ
- **–ó —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏**: ~10% —É—Å–ø—ñ—à–Ω—ñ—Å—Ç—å
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ù–µ—Å—Ç–∞–±—ñ–ª—å–Ω–∏–π –º–∞–π–Ω—ñ–Ω–≥, —Ñ—Ä—É—Å—Ç—Ä–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

### –ü—Ä–∏—á–∏–Ω–∞ –ü—Ä–æ–±–ª–µ–º–∏

**–û—Å–Ω–æ–≤–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞**: –ü–∞—Ä–∞–º–µ—Ç—Ä `max_tries` –≤ –∫–æ–º–∞–Ω–¥—ñ `generatetoaddress` –±—É–≤ –∑–∞–º–∞–ª–∏–π –¥–ª—è –ø–æ—Ç–æ—á–Ω–æ—ó —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ Krepto.

#### –¢–µ—Ö–Ω—ñ—á–Ω—ñ –î–µ—Ç–∞–ª—ñ
1. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π max_tries**: 1,000,000 (1M)
2. **–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å Krepto**: 0.000244140625
3. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ß–∞—Å—Ç–æ 1M —Å–ø—Ä–æ–± –±—É–ª–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–ª—è –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è –≤–∞–ª—ñ–¥–Ω–æ–≥–æ –±–ª–æ–∫—É

#### –ê–Ω–∞–ª—ñ–∑ –ö–æ–¥—É
```cpp
// src/rpc/mining.cpp - —Ñ—É–Ω–∫—Ü—ñ—è generatetoaddress
static RPCHelpMan generatetoaddress()
{
    // ...
    int max_tries = 1000000; // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è
    if (!request.params[2].isNull()) {
        max_tries = request.params[2].getInt<int>();
    }
    // ...
}
```

### –ö—Ä–æ–∫–∏ –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

#### 1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –õ–æ–≥—ñ–≤
```bash
tail -f /Users/serbinov/.krepto/debug.log
# –ü–æ–∫–∞–∑—É–≤–∞–ª–æ, —â–æ –º–∞–π–Ω—ñ–Ω–≥ –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è, –∞–ª–µ –Ω–µ –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è —É—Å–ø—ñ—à–Ω–æ
```

#### 2. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ –†—ñ–∑–Ω–∏–º–∏ max_tries
```bash
# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π (—á–∞—Å—Ç–æ –Ω–µ –ø—Ä–∞—Ü—é—î)
./src/bitcoin-cli generatetoaddress 1 kr1qyd9fkjjacagwha4l4548q02glxt9w88rxpuyr3
[]

# –ó –∑–±—ñ–ª—å—à–µ–Ω–∏–º max_tries
./src/bitcoin-cli generatetoaddress 1 kr1qyd9fkjjacagwha4l4548q02glxt9w88rxpuyr3 10000000
[
  "00000468fe236171119a01e542304b6a1e06091dd9b56e8a71d1c728abf62d29"
]
```

#### 3. –ê–Ω–∞–ª—ñ–∑ –®–≤–∏–¥–∫–æ—Å—Ç—ñ –ú–∞–π–Ω—ñ–Ω–≥—É
- **–ó 10M max_tries**: 100% —É—Å–ø—ñ—à–Ω—ñ—Å—Ç—å
- **–ß–∞—Å –Ω–∞ –±–ª–æ–∫**: ~0.67 —Å–µ–∫—É–Ω–¥–∏
- **–®–≤–∏–¥–∫—ñ—Å—Ç—å**: ~5,400 –±–ª–æ–∫—ñ–≤/–≥–æ–¥–∏–Ω—É

### –û—Å—Ç–∞—Ç–æ—á–Ω–µ –†—ñ—à–µ–Ω–Ω—è

#### –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –ö–æ–º–∞–Ω–¥–∞ –ú–∞–π–Ω—ñ–Ω–≥—É
```bash
# –ó–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ (–Ω–µ–Ω–∞–¥—ñ–π–Ω–æ):
generatetoaddress 1 kr1qyd9fkjjacagwha4l4548q02glxt9w88rxpuyr3

# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ü–µ (–Ω–∞–¥—ñ–π–Ω–æ):
generatetoaddress 1 kr1qyd9fkjjacagwha4l4548q02glxt9w88rxpuyr3 10000000
```

#### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –°–∫—Ä–∏–ø—Ç—ñ–≤ –¥–ª—è –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó

**1. –°–∫—Ä–∏–ø—Ç –ü–æ—Å—Ç—ñ–π–Ω–æ–≥–æ –ú–∞–π–Ω—ñ–Ω–≥—É (`mine_krepto.sh`)**:
```bash
#!/bin/bash
# –ú–∞–π–Ω–∏—Ç—å –±–ª–æ–∫–∏ –±–µ–∑–ø–µ—Ä–µ—Ä–≤–Ω–æ –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
DEFAULT_MAX_TRIES=10000000
RESULT=$($CLI_CMD generatetoaddress $BLOCKS_PER_BATCH $MINING_ADDRESS $MAX_TRIES 2>&1)
```

**2. –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π –°–∫—Ä–∏–ø—Ç (`start_mining.sh`)**:
```bash
#!/bin/bash
# –î–æ–ø–æ–º–∞–≥–∞—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –ª–µ–≥–∫–æ –ø–æ—á–∞—Ç–∏ –º–∞–π–Ω—ñ–Ω–≥
echo "‚õèÔ∏è  Mining $num_blocks blocks..."
./src/bitcoin-cli generatetoaddress "$num_blocks" "$MINING_ADDRESS" 10000000
```

**3. –ü–æ–≤–Ω–∞ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è (`MINING.md`)**:
- –ü–æ—è—Å–Ω–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º–∏ max_tries
- –ü—Ä–∞–≤–∏–ª—å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏
- –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
- –í–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ü—ñ—Å–ª—è –†—ñ—à–µ–Ω–Ω—è

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ú–∞–π–Ω—ñ–Ω–≥—É
```bash
# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è 5 –±–ª–æ–∫—ñ–≤ –ø—ñ–¥—Ä—è–¥
./src/bitcoin-cli generatetoaddress 5 kr1qyd9fkjjacagwha4l4548q02glxt9w88rxpuyr3 10000000
[
  "00000468fe236171119a01e542304b6a1e06091dd9b56e8a71d1c728abf62d29",
  "000001c9d8782b4511d4f598be92b52ad377ad41b2a61d1e70ccc4e591bc8440",
  "00000741e11d899c4906415cdc65c41dfee2d0bfc86a67d003a6f1871500e313",
  "00000de7ad74eb599e413d61c73d8f05a6914dd9e2891985cd9aff02e8afef09",
  "0000055a3b05241e770ee456d84fb2bb690b212d16db5ed657190a378ffce8d1"
]
```

#### –ü–æ—Ç–æ—á–Ω–∏–π –°—Ç–∞–Ω –ú–µ—Ä–µ–∂—ñ
```json
{
  "chain": "main",
  "blocks": 17,
  "headers": 17,
  "bestblockhash": "00000741e11d899c4906415cdc65c41dfee2d0bfc86a67d003a6f1871500e313",
  "difficulty": 0.000244140625,
  "time": 1748283556,
  "mediantime": 1748283500
}
```

### –ö–ª—é—á–æ–≤—ñ –£—Ä–æ–∫–∏

1. **max_tries –ö—Ä–∏—Ç–∏—á–Ω–æ –í–∞–∂–ª–∏–≤–∏–π**: –î–ª—è Krepto –∑–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ 10M+ max_tries
2. **–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å vs –°–ø—Ä–æ–±–∏**: –ù–∏–∑—å–∫–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –Ω–µ –æ–∑–Ω–∞—á–∞—î —à–≤–∏–¥–∫–∏–π –º–∞–π–Ω—ñ–Ω–≥ –∑ –º–∞–ª–∏–º–∏ max_tries
3. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è**: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç—ñ–≤ –∑–∞–ø–æ–±—ñ–≥–∞—î –ø–æ–º–∏–ª–∫–∞–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è**: –í–∞–∂–ª–∏–≤–æ –ø–æ—è—Å–Ω–∏—Ç–∏ —Ç–µ—Ö–Ω—ñ—á–Ω—ñ –Ω—é–∞–Ω—Å–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

#### –ó–∞–≤–∂–¥–∏ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏
```bash
# –ü—Ä–∞–≤–∏–ª—å–Ω–æ (–Ω–∞–¥—ñ–π–Ω–æ)
generatetoaddress [blocks] [address] 10000000

# –ê–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≥–æ—Ç–æ–≤—ñ —Å–∫—Ä–∏–ø—Ç–∏
./mine_krepto.sh
./start_mining.sh
```

#### –ù—ñ–∫–æ–ª–∏ –ù–µ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏
```bash
# –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (–Ω–µ–Ω–∞–¥—ñ–π–Ω–æ)
generatetoaddress [blocks] [address]
# –∞–±–æ
generatetoaddress [blocks] [address] 1000000
```

### –ê–ª–≥–æ—Ä–∏—Ç–º –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ú–∞–π–Ω—ñ–Ω–≥—É

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –∑ –º–∞–π–Ω—ñ–Ω–≥–æ–º:

1. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ max_tries**:
   ```bash
   # –Ø–∫—â–æ –ø–æ–≤–µ—Ä—Ç–∞—î [], –∑–±—ñ–ª—å—à–∏—Ç–∏ max_tries
   generatetoaddress 1 address 50000000
   ```

2. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å –¥–µ–º–æ–Ω–∞**:
   ```bash
   ./src/bitcoin-cli getblockchaininfo
   ./src/bitcoin-cli getmininginfo
   ```

3. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏**:
   ```bash
   tail -f ~/.krepto/debug.log
   ```

4. **–í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –≥–æ—Ç–æ–≤—ñ —Å–∫—Ä–∏–ø—Ç–∏**:
   ```bash
   ./start_mining.sh  # –î–ª—è —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–∞–π–Ω—ñ–Ω–≥—É
   ./mine_krepto.sh   # –î–ª—è –ø–æ—Å—Ç—ñ–π–Ω–æ–≥–æ –º–∞–π–Ω—ñ–Ω–≥—É
   ```

### –°—Ç–≤–æ—Ä–µ–Ω—ñ –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏

1. **`mine_krepto.sh`** - –ü–æ—Å—Ç—ñ–π–Ω–∏–π –º–∞–π–Ω—ñ–Ω–≥ –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ—é
2. **`start_mining.sh`** - –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π –º–∞–π–Ω–µ—Ä –∑ –º–µ–Ω—é
3. **`MINING.md`** - –ü–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –∑ –ø—Ä–∏–∫–ª–∞–¥–∞–º–∏
4. **–ü—Ä–∞–≤–∏–ª—å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏** - –í—Å—ñ –∑ max_tries=10M

**–ß–∞—Å –≤–∏—Ä—ñ—à–µ–Ω–Ω—è**: 1 –≥–æ–¥–∏–Ω–∞  
**–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å**: –°–µ—Ä–µ–¥–Ω—è (–ø–æ—Ç—Ä–µ–±—É–≤–∞–ª–∞ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ RPC)  
**–í–∞–∂–ª–∏–≤—ñ—Å—Ç—å**: –í–∏—Å–æ–∫–∞ (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–æ–≥–æ –¥–æ—Å–≤—ñ–¥—É –º–∞–π–Ω—ñ–Ω–≥—É)

---

## üö® –ü—Ä–æ–±–ª–µ–º–∞ #3: SegWit –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó –ë–ª–æ–∫—É—é—Ç—å –ú–∞–π–Ω—ñ–Ω–≥ (–ö–†–ò–¢–ò–ß–ù–ê)

**–î–∞—Ç–∞**: 27 —Ç—Ä–∞–≤–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å**: üîç –î–Ü–ê–ì–ù–û–°–¢–û–í–ê–ù–û (–ß–∞—Å—Ç–∫–æ–≤–æ –≤–∏—Ä—ñ—à–µ–Ω–æ)  
**–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å**: –ö—Ä–∏—Ç–∏—á–Ω–∞ (6+ –≥–æ–¥–∏–Ω —Ä–æ–∑—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è)

### –û–ø–∏—Å –ü—Ä–æ–±–ª–µ–º–∏

**–ö–†–ò–¢–ò–ß–ù–ê –ü–†–û–ë–õ–ï–ú–ê**: –ü—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è SegWit —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó –≤ –≥–∞–º–∞–Ω—Ü—ñ (–Ω–∞–≤—ñ—Ç—å –∑—ñ —Å–≤–æ—î—ó –∞–¥—Ä–µ—Å–∏ –Ω–∞ —Å–≤–æ—é) –º–∞–π–Ω—ñ–Ω–≥ –ø–æ–≤–Ω—ñ—Å—Ç—é –ø—Ä–∏–ø–∏–Ω—è—î—Ç—å—Å—è –∑ –ø–æ–º–∏–ª–∫–æ—é `unexpected-witness, CheckWitnessMalleation : unexpected witness data found`.

#### –°–∏–º–ø—Ç–æ–º–∏
```bash
# –ú–∞–π–Ω—ñ–Ω–≥ –ø—Ä–∞—Ü—é–≤–∞–≤ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
./src/bitcoin-cli generatetoaddress 1 kr1qyd9fkjjacagwha4l4548q02glxt9w88rxpuyr3
["00000468fe236171119a01e542304b6a1e06091dd9b56e8a71d1c728abf62d29"]

# –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Ä–æ–±–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—é –≤ GUI (–∑—ñ —Å–≤–æ—î—ó –∞–¥—Ä–µ—Å–∏ –Ω–∞ —Å–≤–æ—é)
# –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ:

./src/bitcoin-cli generatetoaddress 1 kr1qyd9fkjjacagwha4l4548q02glxt9w88rxpuyr3
error code: -1
error message:
CreateNewBlock: TestBlockValidity failed: unexpected-witness, CheckWitnessMalleation : unexpected witness data found
```

#### –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ü—Ä–æ–±–ª–µ–º–Ω–æ—ó –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
```json
{
  "txid": "4a8353e4a06e4217c78928b8ce27a452daff4ffe972d28aacba96c5d6d617b0e",
  "hash": "db6b7c9cabea8b8e57b2c949ad31b1323dbb0cae79f2a46da85cf1926ec2c7ba",
  "version": 2,
  "size": 222,
  "vsize": 141,
  "weight": 561,
  "txinwitness": [
    "3044022053defdc2c212acbbee066cfafd752fc3afea9b7eeaaf214bc302e987fb80dedb022023973a5ffc997623b8b24657233fbd53887d2ec67eefcfa826e12466a278dc0401",
    "02f97fe81ffcb648a45953d8b52d1d63b492de2aec47df91854b36bc4eb7c66674"
  ],
  "vout": [
    {
      "address": "kr1qprhfhmk2y4uyumwrx0jdjhapzeuhr7fnzj78fz",
      "type": "witness_v0_keyhash"
    }
  ]
}
```

### –ü—Ä–∏—á–∏–Ω–∞ –ü—Ä–æ–±–ª–µ–º–∏

**–û—Å–Ω–æ–≤–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞**: –ö–æ–Ω—Ñ–ª—ñ–∫—Ç –º—ñ–∂ SegWit —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è–º–∏ –≤ mempool —Ç–∞ –ø—Ä–æ—Ü–µ—Å–æ–º —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–ª–æ–∫—ñ–≤ –≤ Krepto.

#### –¢–µ—Ö–Ω—ñ—á–Ω—ñ –î–µ—Ç–∞–ª—ñ
1. **SegWit —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó** (–∑ `txinwitness` —Ç–∞ –∞–¥—Ä–µ—Å–∞–º–∏ `kr1q...`) –ø–æ—Ç—Ä–∞–ø–ª—è—é—Ç—å –≤ mempool
2. **–ü—Ä–æ—Ü–µ—Å –º–∞–π–Ω—ñ–Ω–≥—É** –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –≤–∫–ª—é—á–∏—Ç–∏ —ó—Ö –≤ –±–ª–æ–∫
3. **CheckWitnessMalleation** –≤–∏—è–≤–ª—è—î "–Ω–µ–æ—á—ñ–∫—É–≤–∞–Ω—ñ witness data"
4. **TestBlockValidity** –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å, –±–ª–æ–∫ –Ω–µ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è

#### –ö–ª—é—á–æ–≤—ñ –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏
- `weight` (561) > `vsize * 4` (141 * 4 = 564) - –æ–∑–Ω–∞–∫–∞ SegWit
- –ê–¥—Ä–µ—Å–∏ —Ç–∏–ø—É `kr1q...` (bech32 format)
- –ù–∞—è–≤–Ω—ñ—Å—Ç—å `txinwitness` –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
- `unbroadcastcount` –º–æ–∂–µ –±—É—Ç–∏ > 0

### –ö—Ä–æ–∫–∏ –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

#### 1. –í–∏—è–≤–ª–µ–Ω–Ω—è –ü—Ä–æ–±–ª–µ–º–Ω–æ—ó –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ mempool
./src/bitcoin-cli getmempoolinfo
# –Ø–∫—â–æ size > 0, –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó

./src/bitcoin-cli getrawmempool true
# –®—É–∫–∞—î–º–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó –∑ weight > vsize * 4

./src/bitcoin-cli getrawtransaction [txid] true
# –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å txinwitness —Ç–∞ kr1q –∞–¥—Ä–µ—Å
```

#### 2. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ü—Ä–æ–±–ª–µ–º–∏
```bash
# –°–ø—Ä–æ–±–∞ –º–∞–π–Ω—ñ–Ω–≥—É –∑ SegWit –≤ mempool
./src/bitcoin-cli generatetoaddress 1 address 10000000
# –û—á—ñ–∫—É—î–º–æ: unexpected-witness –ø–æ–º–∏–ª–∫—É

# –°–ø—Ä–æ–±–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ—Ä–æ–∂–Ω—å–æ–≥–æ –±–ª–æ–∫—É
./src/bitcoin-cli generateblock address '[]'
# –û—á—ñ–∫—É—î–º–æ: Failed to make block
```

#### 3. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ì—ñ–ø–æ—Ç–µ–∑–∏
```bash
# –í–∏–¥–∞–ª–µ–Ω–Ω—è SegWit —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó –∑ mempool (–¥–∏–≤. –∞–ª–≥–æ—Ä–∏—Ç–º –Ω–∏–∂—á–µ)
# –ü—ñ—Å–ª—è –æ—á–∏—â–µ–Ω–Ω—è:
./src/bitcoin-cli generatetoaddress 1 address 10000000
# –û—á—ñ–∫—É—î–º–æ: —É—Å–ø—ñ—à–Ω–∏–π –º–∞–π–Ω—ñ–Ω–≥
```

### –ê–ª–≥–æ—Ä–∏—Ç–º–∏ –í–∏—Ä—ñ—à–µ–Ω–Ω—è

## üîß –ê–õ–ì–û–†–ò–¢–ú #1: –í–∏–¥–∞–ª–µ–Ω–Ω—è –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó –∑ Mempool

### –ú–µ—Ç–æ–¥ 1: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–µ–∑ Mempool
```bash
# 1. –ó—É–ø–∏–Ω–∏—Ç–∏ –Ω–æ–¥—É
./src/bitcoin-cli stop

# 2. –í–∏–¥–∞–ª–∏—Ç–∏ —Ñ–∞–π–ª mempool
rm -f /Users/serbinov/.krepto/mempool.dat

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –±–µ–∑ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è mempool
./src/bitcoind -datadir=/Users/serbinov/.krepto -daemon -persistmempool=0

# 4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
./src/bitcoin-cli getmempoolinfo
```

### –ú–µ—Ç–æ–¥ 2: –Ü–∑–æ–ª—è—Ü—ñ—è –≤—ñ–¥ –ú–µ—Ä–µ–∂—ñ
```bash
# 1. –ó—É–ø–∏–Ω–∏—Ç–∏ –Ω–æ–¥—É
./src/bitcoin-cli stop

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –±–µ–∑ –º–µ—Ä–µ–∂–µ–≤–∏—Ö –∑'—î–¥–Ω–∞–Ω—å
./src/bitcoind -datadir=/Users/serbinov/.krepto -daemon -connect=0 -persistmempool=0

# 3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ mempool
./src/bitcoin-cli getmempoolinfo
```

### –ú–µ—Ç–æ–¥ 3: –í—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –ì–∞–º–∞–Ω—Ü—è
```bash
# 1. –ó—É–ø–∏–Ω–∏—Ç–∏ –Ω–æ–¥—É
./src/bitcoin-cli stop

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –±–µ–∑ –≥–∞–º–∞–Ω—Ü—è (–¥–∂–µ—Ä–µ–ª–æ SegWit —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π)
./src/bitcoind -datadir=/Users/serbinov/.krepto -daemon -disablewallet -persistmempool=0

# 3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ mempool (–ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ–π)
./src/bitcoin-cli getmempoolinfo
```

### –ú–µ—Ç–æ–¥ 4: –†–µ–∑–µ—Ä–≤–Ω–µ –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è –ì–∞–º–∞–Ω—Ü—è
```bash
# 1. –ó—É–ø–∏–Ω–∏—Ç–∏ –Ω–æ–¥—É
./src/bitcoin-cli stop

# 2. –ü–µ—Ä–µ–º—ñ—Å—Ç–∏—Ç–∏ –ø—Ä–æ–±–ª–µ–º–Ω—ñ –≥–∞–º–∞–Ω—Ü—ñ
mv /Users/serbinov/.krepto/wallets /Users/serbinov/.krepto/wallets_backup
mv /Users/serbinov/.krepto/mining_wallet /Users/serbinov/.krepto/mining_wallet_backup

# 3. –í–∏–¥–∞–ª–∏—Ç–∏ mempool
rm -f /Users/serbinov/.krepto/mempool.dat

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∑ —á–∏—Å—Ç–∏–º —Å—Ç–∞–Ω–æ–º
./src/bitcoind -datadir=/Users/serbinov/.krepto -daemon
```

## üîß –ê–õ–ì–û–†–ò–¢–ú #2: –í—ñ–¥–∫–∞—Ç –¥–æ –ü–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –ë–ª–æ–∫—É

### –ú–µ—Ç–æ–¥ 1: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è invalidateblock
```bash
# 1. –û—Ç—Ä–∏–º–∞—Ç–∏ —Ö–µ—à –±–ª–æ–∫—É, –¥–æ —è–∫–æ–≥–æ —Ö–æ—á–µ–º–æ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è
./src/bitcoin-cli getblockhash [target_height]

# 2. –û—Ç—Ä–∏–º–∞—Ç–∏ —Ö–µ—à –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –±–ª–æ–∫—É (—è–∫–∏–π —Ö–æ—á–µ–º–æ –≤–∏–¥–∞–ª–∏—Ç–∏)
./src/bitcoin-cli getblockhash [target_height + 1]

# 3. –ó—Ä–æ–±–∏—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –±–ª–æ–∫ –Ω–µ–¥—ñ–π—Å–Ω–∏–º
./src/bitcoin-cli invalidateblock [next_block_hash]

# 4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
./src/bitcoin-cli getblockchaininfo
```

### –ú–µ—Ç–æ–¥ 2: –í—ñ–¥–∫–∞—Ç –Ω–∞ N –ë–ª–æ–∫—ñ–≤
```bash
# –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤—ñ–¥–∫–∞—Ç—É –Ω–∞ N –±–ª–æ–∫—ñ–≤ –Ω–∞–∑–∞–¥
rollback_blocks() {
    local blocks_back=$1
    
    # –û—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω—É –≤–∏—Å–æ—Ç—É
    current_height=$(./src/bitcoin-cli getblockchaininfo | jq -r '.blocks')
    
    # –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ —Ü—ñ–ª—å–æ–≤—É –≤–∏—Å–æ—Ç—É
    target_height=$((current_height - blocks_back))
    
    # –û—Ç—Ä–∏–º–∞—Ç–∏ —Ö–µ—à –±–ª–æ–∫—É –¥–ª—è —ñ–Ω–≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
    invalid_height=$((target_height + 1))
    invalid_hash=$(./src/bitcoin-cli getblockhash $invalid_height)
    
    # –Ü–Ω–≤–∞–ª—ñ–¥—É–≤–∞—Ç–∏ –±–ª–æ–∫
    ./src/bitcoin-cli invalidateblock $invalid_hash
    
    echo "Rolled back $blocks_back blocks. New height: $target_height"
}

# –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:
rollback_blocks 100  # –í—ñ–¥–∫–∞—Ç –Ω–∞ 100 –±–ª–æ–∫—ñ–≤
```

### –ú–µ—Ç–æ–¥ 3: –í—ñ–¥–∫–∞—Ç –∑ Reindex (–†–∞–¥–∏–∫–∞–ª—å–Ω–∏–π)
```bash
# 1. –ó—É–ø–∏–Ω–∏—Ç–∏ –Ω–æ–¥—É
./src/bitcoin-cli stop

# 2. –í–∏–¥–∞–ª–∏—Ç–∏ chainstate (–∑–±–µ—Ä–µ–≥—Ç–∏ blocks)
rm -rf /Users/serbinov/.krepto/chainstate

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∑ reindex
./src/bitcoind -datadir=/Users/serbinov/.krepto -daemon -reindex

# 4. –î–æ—á–µ–∫–∞—Ç–∏—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è reindex
# 5. –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ invalidateblock –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –≤—ñ–¥–∫–∞—Ç—É
```

### –ú–µ—Ç–æ–¥ 4: –í—ñ–¥–∫–∞—Ç –¥–æ –ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó –î–∞—Ç–∏
```bash
# 1. –ó–Ω–∞–π—Ç–∏ –±–ª–æ–∫ –∑–∞ —á–∞—Å–æ–º
find_block_by_time() {
    local target_time=$1
    local height=0
    
    while true; do
        block_time=$(./src/bitcoin-cli getblock $(./src/bitcoin-cli getblockhash $height) | jq -r '.time')
        if [ $block_time -ge $target_time ]; then
            echo $height
            break
        fi
        height=$((height + 1))
    done
}

# 2. –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –¥–ª—è –≤—ñ–¥–∫–∞—Ç—É
target_height=$(find_block_by_time 1748292748)  # Unix timestamp
./src/bitcoin-cli invalidateblock $(./src/bitcoin-cli getblockhash $((target_height + 1)))
```

## üîß –ê–õ–ì–û–†–ò–¢–ú #3: –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ SegWit –ü—Ä–æ–±–ª–µ–º

### –®–≤–∏–¥–∫–∞ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞
```bash
# 1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ mempool –Ω–∞ SegWit
check_segwit_in_mempool() {
    ./src/bitcoin-cli getrawmempool true | jq -r 'to_entries[] | select(.value.weight > (.value.vsize * 4)) | .key'
}

# 2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—é
check_transaction_segwit() {
    local txid=$1
    ./src/bitcoin-cli getrawtransaction $txid true | jq -r '.txinwitness // empty'
}

# 3. –¢–µ—Å—Ç –º–∞–π–Ω—ñ–Ω–≥—É
test_mining() {
    result=$(./src/bitcoin-cli generatetoaddress 1 address 10000000 2>&1)
    if echo "$result" | grep -q "unexpected-witness"; then
        echo "‚ùå SegWit –ø—Ä–æ–±–ª–µ–º–∞ –≤–∏—è–≤–ª–µ–Ω–∞"
        return 1
    else
        echo "‚úÖ –ú–∞–π–Ω—ñ–Ω–≥ –ø—Ä–∞—Ü—é—î"
        return 0
    fi
}
```

### –ü–æ–≤–Ω–∞ –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
# –°–∫—Ä–∏–ø—Ç –ø–æ–≤–Ω–æ—ó –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
diagnose_segwit_issue() {
    echo "üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ SegWit –ø—Ä–æ–±–ª–µ–º..."
    
    # –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ mempool
    mempool_size=$(./src/bitcoin-cli getmempoolinfo | jq -r '.size')
    echo "üìä Mempool size: $mempool_size"
    
    if [ $mempool_size -gt 0 ]; then
        echo "üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ SegWit —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π..."
        segwit_txs=$(check_segwit_in_mempool)
        if [ -n "$segwit_txs" ]; then
            echo "‚ö†Ô∏è  –ó–Ω–∞–π–¥–µ–Ω–æ SegWit —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó:"
            echo "$segwit_txs"
        fi
    fi
    
    # –¢–µ—Å—Ç –º–∞–π–Ω—ñ–Ω–≥—É
    echo "üî® –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –º–∞–π–Ω—ñ–Ω–≥—É..."
    test_mining
    
    # –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó
    if [ $? -ne 0 ]; then
        echo "üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:"
        echo "1. –û—á–∏—Å—Ç–∏—Ç–∏ mempool (–ê–ª–≥–æ—Ä–∏—Ç–º #1)"
        echo "2. –í—ñ–¥–∫–∞—Ç–∏—Ç–∏—Å—è –¥–æ –±–ª–æ–∫—É –±–µ–∑ SegWit (–ê–ª–≥–æ—Ä–∏—Ç–º #2)"
        echo "3. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –±–µ–∑ –≥–∞–º–∞–Ω—Ü—è –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è"
    fi
}
```

### –ü–æ—Ç–æ—á–Ω–∏–π –°—Ç–∞—Ç—É—Å

#### –©–æ –ü—Ä–∞—Ü—é—î
- ‚úÖ –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º–∏
- ‚úÖ –ê–ª–≥–æ—Ä–∏—Ç–º–∏ –æ—á–∏—â–µ–Ω–Ω—è mempool
- ‚úÖ –ê–ª–≥–æ—Ä–∏—Ç–º–∏ –≤—ñ–¥–∫–∞—Ç—É –±–ª–æ–∫—ñ–≤
- ‚úÖ –ú–∞–π–Ω—ñ–Ω–≥ –±–µ–∑ SegWit —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π

#### –©–æ –ù–µ –ü—Ä–∞—Ü—é—î
- ‚ùå –ú–∞–π–Ω—ñ–Ω–≥ –∑ SegWit —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è–º–∏ –≤ mempool
- ‚ùå –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–ª–æ–∫—ñ–≤ –∑ witness data
- ‚ùå –ù–æ—Ä–º–∞–ª—å–Ω–∞ —Ä–æ–±–æ—Ç–∞ –ø—ñ—Å–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π –≤ GUI

#### –¢–∏–º—á–∞—Å–æ–≤–µ –†—ñ—à–µ–Ω–Ω—è
1. **–î–ª—è –º–∞–π–Ω—ñ–Ω–≥—É**: –ó–∞–ø—É—Å–∫–∞—Ç–∏ –Ω–æ–¥—É –∑ `-disablewallet`
2. **–î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ legacy –∞–¥—Ä–µ—Å–∏
3. **–î–ª—è –≤—ñ–¥–∫–∞—Ç—É**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `invalidateblock`

### –ù–µ–æ–±—Ö—ñ–¥–Ω—ñ –î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è

1. **–ß–æ–º—É SegWit —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó —Å—Ç–≤–æ—Ä—é—é—Ç—å –ø—Ä–æ–±–ª–µ–º–∏?**
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è SegWit –≤ chainparams.cpp
   - –î–æ—Å–ª—ñ–¥–∏—Ç–∏ CheckWitnessMalleation –ª–æ–≥—ñ–∫—É
   - –ü–æ—Ä—ñ–≤–Ω—è—Ç–∏ –∑ Bitcoin Core

2. **–Ø–∫ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ CheckWitnessMalleation?**
   - –ó–Ω–∞–π—Ç–∏ –¥–∂–µ—Ä–µ–ª–æ –ø–æ–º–∏–ª–∫–∏ –≤ –∫–æ–¥—ñ
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∞–∫—Ç–∏–≤–∞—Ü—ñ—é SegWit –≤ –º–µ—Ä–µ–∂—ñ
   - –ú–æ–∂–ª–∏–≤–æ, –≤—ñ–¥–∫–ª—é—á–∏—Ç–∏ SegWit –¥–ª—è Krepto

3. **–ß–æ–º—É GUI —Å—Ç–≤–æ—Ä—é—î –ø—Ä–æ–±–ª–µ–º–Ω—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó?**
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–∏–ø—É –∞–¥—Ä–µ—Å –≤ GUI
   - –ó–º—É—Å–∏—Ç–∏ GUI –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ legacy –∞–¥—Ä–µ—Å–∏
   - –î–æ–¥–∞—Ç–∏ –æ–ø—Ü—ñ—é –≤–∏–±–æ—Ä—É —Ç–∏–ø—É –∞–¥—Ä–µ—Å–∏

### –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è –®–≤–∏–¥–∫–æ–≥–æ –í–∏—Ä—ñ—à–µ–Ω–Ω—è

```bash
# –®–≤–∏–¥–∫–µ –æ—á–∏—â–µ–Ω–Ω—è –¥–ª—è –º–∞–π–Ω—ñ–Ω–≥—É
quick_fix_mining() {
    ./src/bitcoin-cli stop
    sleep 3
    rm -f /Users/serbinov/.krepto/mempool.dat
    ./src/bitcoind -datadir=/Users/serbinov/.krepto -daemon -disablewallet
    sleep 5
    ./src/bitcoin-cli generatetoaddress 1 K9iZTbAUMnikKeQae4qwkYc8A5xpazEtTW 10000000
}

# –í—ñ–¥–∫–∞—Ç –¥–æ –±–µ–∑–ø–µ—á–Ω–æ–≥–æ —Å—Ç–∞–Ω—É
rollback_to_safe_state() {
    ./src/bitcoin-cli invalidateblock $(./src/bitcoin-cli getblockhash 2101)
    echo "Rolled back to block 2100 (safe state)"
}
```

**–ß–∞—Å –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è**: 6+ –≥–æ–¥–∏–Ω  
**–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å**: –ö—Ä–∏—Ç–∏—á–Ω–∞ (–±–ª–æ–∫—É—î –Ω–æ—Ä–º–∞–ª—å–Ω—É —Ä–æ–±–æ—Ç—É)  
**–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç**: –ù–∞–π–≤–∏—â–∏–π (–ø–æ—Ç—Ä–µ–±—É—î –Ω–µ–≥–∞–π–Ω–æ–≥–æ –≤–∏—Ä—ñ—à–µ–Ω–Ω—è)

### üîç –ù–û–í–ê –ì–Ü–ü–û–¢–ï–ó–ê: SegWit –ê–∫—Ç–∏–≤–∞—Ü—ñ—è –ö–æ–Ω—Ñ–ª—ñ–∫—Ç (27.05.2025)

**–î–∂–µ—Ä–µ–ª–æ**: Stack Overflow –ø—Ä–æ–±–ª–µ–º–∞ –∑ Bitcoin Core v0.14.3 vs v0.16.3  
**–°—Ö–æ–∂—ñ—Å—Ç—å**: –Ü–¥–µ–Ω—Ç–∏—á–Ω–∞ –ø–æ–º–∏–ª–∫–∞ `unexpected-witness, ContextualCheckBlock : unexpected witness data found (code 16)`

#### –ê–Ω–∞–ª—ñ–∑ –ü—Ä–æ–±–ª–µ–º–∏ –∑ Stack Overflow
1. **–ü—Ä–æ–±–ª–µ–º–∞**: –†—ñ–∑–Ω—ñ –≤–µ—Ä—Å—ñ—ó Bitcoin Core –º–∞–ª–∏ —Ä—ñ–∑–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è SegWit –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó
2. **–°–∏–º–ø—Ç–æ–º**: `ERROR: AcceptBlock: unexpected-witness, ContextualCheckBlock : unexpected witness data found (code 16)`
3. **–ü—Ä–∏—á–∏–Ω–∞**: –û–¥–Ω–∞ –Ω–æ–¥–∞ –º–∞–ª–∞ SegWit –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–∏–π, —ñ–Ω—à–∞ - –Ω—ñ
4. **–†—ñ—à–µ–Ω–Ω—è**: –î–æ–¥–∞—Ç–∏ `vbparams=segwit:0:99999999999` –≤ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –æ–±–æ—Ö –Ω–æ–¥

#### –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –¥–æ Krepto
**–ì–Ü–ü–û–¢–ï–ó–ê**: Krepto –º–æ–∂–µ –º–∞—Ç–∏ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö SegWit –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó:

1. **GUI –≥–∞–º–∞–Ω–µ—Ü—å** —Å—Ç–≤–æ—Ä—é—î SegWit —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó (–ø—Ä–∏–ø—É—Å–∫–∞—î —â–æ SegWit –∞–∫—Ç–∏–≤–Ω–∏–π)
2. **–ú–∞–π–Ω—ñ–Ω–≥ –ø—Ä–æ—Ü–µ—Å** –Ω–µ —Ä–æ–∑–ø—ñ–∑–Ω–∞—î SegWit —è–∫ –∞–∫—Ç–∏–≤–Ω–∏–π
3. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: `CheckWitnessMalleation` –≤—ñ–¥—Ö–∏–ª—è—î witness data —è–∫ –Ω–µ–æ—á—ñ–∫—É–≤–∞–Ω—ñ

#### –ú–æ–∂–ª–∏–≤—ñ –ü—Ä–∏—á–∏–Ω–∏ –≤ Krepto
1. **–ê–¥—Ä–µ—Å–∏ –ø–æ—á–∏–Ω–∞—é—Ç—å—Å—è –∑ "K"**: –ú–æ–∂–ª–∏–≤–æ –≤–ø–ª–∏–≤–∞—î –Ω–∞ SegWit –∞–∫—Ç–∏–≤–∞—Ü—ñ—é
2. **Chainparams –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è**: SegWit –º–æ–∂–µ –±—É—Ç–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π
3. **Genesis –±–ª–æ–∫**: –ú–æ–∂–ª–∏–≤–æ SegWit –∞–∫—Ç–∏–≤–∞—Ü—ñ—è –ø—Ä–∏–≤'—è–∑–∞–Ω–∞ –¥–æ genesis –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤

#### –ù–µ–æ–±—Ö—ñ–¥–Ω—ñ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∏
1. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ SegWit —Å—Ç–∞—Ç—É—Å**:
   ```bash
   ./src/bitcoin-cli getblockchaininfo | jq '.bip9_softforks.segwit'
   ```

2. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ chainparams.cpp**:
   - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è SegWit –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó
   - –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ consensus.vDeployments
   - –í–∏—Å–æ—Ç–∞ –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó SegWit

3. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∞–¥—Ä–µ—Å–∏**:
   - –ß–∏ –≤–ø–ª–∏–≤–∞—î –ø—Ä–µ—Ñ—ñ–∫—Å "K" –Ω–∞ SegWit
   - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è base58 encoding
   - Bech32 –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –¥–ª—è kr1q –∞–¥—Ä–µ—Å

#### –ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω—ñ –†—ñ—à–µ–Ω–Ω—è
1. **–í—ñ–¥–∫–ª—é—á–∏—Ç–∏ SegWit –ø–æ–≤–Ω—ñ—Å—Ç—é** –≤ chainparams.cpp
2. **–í–∏–ø—Ä–∞–≤–∏—Ç–∏ SegWit –∞–∫—Ç–∏–≤–∞—Ü—ñ—é** –¥–ª—è Krepto –º–µ—Ä–µ–∂—ñ
3. **–î–æ–¥–∞—Ç–∏ vbparams** –≤ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é (—è–∫ –≤ Stack Overflow)
4. **–ó–º—ñ–Ω–∏—Ç–∏ GUI** –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç—ñ–ª—å–∫–∏ legacy –∞–¥—Ä–µ—Å

---

## –ü–æ—Ç–æ—á–Ω—ñ –ü—Ä–æ–±–ª–µ–º–∏ (–ü–æ—Ç—Ä–µ–±—É—é—Ç—å –í–∏—Ä—ñ—à–µ–Ω–Ω—è) üö®

### –ü—Ä–æ–±–ª–µ–º–∞ #5: –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –ö–Ω–æ–ø–æ–∫ GUI
**–î–∞—Ç–∞ –≤–∏—è–≤–ª–µ–Ω–Ω—è**: 27 —Ç—Ä–∞–≤–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–ï –í–ò–†–Ü–®–ï–ù–û  
**–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç**: –í–ò–°–û–ö–ò–ô

#### –°–∏–º–ø—Ç–æ–º–∏
- –ö–Ω–æ–ø–∫–∏ –≤ –≥–æ–ª–æ–≤–Ω–æ–º—É GUI —Ç–∞ Mining Console –º–∞—é—Ç—å —Ä—ñ–∑–Ω–∏–π —Å—Ç–∞–Ω
- –í—ñ–¥—Å—É—Ç–Ω—è –≤—ñ–∑—É–∞–ª—å–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –º—ñ–∂ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- –ö–Ω–æ–ø–∫–∏ –º–æ–∂—É—Ç—å –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Å—Ç–∞–Ω –º–∞–π–Ω—ñ–Ω–≥—É

#### –û–ø–∏—Å –ü—Ä–æ–±–ª–µ–º–∏
**–ü–æ—Ç–æ—á–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞**:
- –ì–æ–ª–æ–≤–Ω–∏–π GUI –º–∞—î –∫–Ω–æ–ø–∫–∏ "Start Mining" / "Stop Mining"
- Mining Console –º–∞—î –≤–ª–∞—Å–Ω—ñ –∫–Ω–æ–ø–∫–∏
- –°–∏–≥–Ω–∞–ª–∏ –º—ñ–∂ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω—ñ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

#### –ü–æ—Ç—Ä—ñ–±–Ω–µ –†—ñ—à–µ–Ω–Ω—è
1. **–¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —Å—Ç–∞–Ω**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–¥–∏–Ω –¥–∂–µ—Ä–µ–ª–æ —ñ—Å—Ç–∏–Ω–∏ –¥–ª—è —Å—Ç–∞–Ω—É –º–∞–π–Ω—ñ–Ω–≥—É
2. **–°–ø—ñ–ª—å–Ω—ñ —Å–∏–≥–Ω–∞–ª–∏**: –í—Å—ñ –∫–Ω–æ–ø–∫–∏ –ø–æ–≤–∏–Ω–Ω—ñ —Ä–µ–∞–≥—É–≤–∞—Ç–∏ –Ω–∞ –æ–¥–Ω—ñ –π —Ç—ñ –∂ —Å–∏–≥–Ω–∞–ª–∏
3. **–°–∏–Ω—Ö—Ä–æ–Ω–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è**: –ü—Ä–∏ –∑–º—ñ–Ω—ñ —Å—Ç–∞–Ω—É –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –≤—Å—ñ –∫–Ω–æ–ø–∫–∏ –æ–¥–Ω–æ—á–∞—Å–Ω–æ

#### –ê–ª–≥–æ—Ä–∏—Ç–º –í–∏—Ä—ñ—à–µ–Ω–Ω—è
```cpp
// –í BitcoinGUI
signals:
    void miningStateChanged(bool isMining);

// –í MiningDialog
public slots:
    void onMiningStateChanged(bool isMining);

// –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–∏–≥–Ω–∞–ª—ñ–≤
connect(gui, &BitcoinGUI::miningStateChanged, 
        miningDialog, &MiningDialog::onMiningStateChanged);
```

## –í–∏—Ä—ñ—à–µ–Ω—ñ –ü—Ä–æ–±–ª–µ–º–∏ ‚úÖ

### –ü—Ä–æ–±–ª–µ–º–∞ #4: GUI –ú–∞–π–Ω—ñ–Ω–≥ - –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –ê–¥—Ä–µ—Å–∏ (–í–ò–†–Ü–®–ï–ù–û)
**–î–∞—Ç–∞ –≤–∏—Ä—ñ—à–µ–Ω–Ω—è**: 27 —Ç—Ä–∞–≤–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–û–í–ù–Ü–°–¢–Æ –í–ò–†–Ü–®–ï–ù–û  
**–ß–∞—Å –Ω–∞ –≤–∏—Ä—ñ—à–µ–Ω–Ω—è**: 2 –≥–æ–¥–∏–Ω–∏ –∞–Ω–∞–ª—ñ–∑—É + 30 —Ö–≤–∏–ª–∏–Ω —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—ó

#### –°–∏–º–ø—Ç–æ–º–∏ (–ë—É–ª–æ)
```
[12:00:43] ERROR: No receiving addresses found in wallet!
[12:00:43] === MINING STOPPED ===
[12:00:43] Total attempts: 0
[12:00:43] Blocks found: 0
```

#### –ü—Ä–∏—á–∏–Ω–∞ –ü—Ä–æ–±–ª–µ–º–∏
GUI –º–∞–π–Ω—ñ–Ω–≥ –Ω–µ –º—ñ–≥ —Ä–æ–∑–ø–æ—á–∞—Ç–∏ —Ä–æ–±–æ—Ç—É —á–µ—Ä–µ–∑ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –∞–¥—Ä–µ—Å–∏ –≤ –≥–∞–º–∞–Ω—Ü—ñ:
1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞**: –ö–æ–¥ –æ—á—ñ–∫—É–≤–∞–≤ —ñ—Å–Ω—É—é—á—É –∞–¥—Ä–µ—Å—É –∑–∞–º—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ—ó
2. **–í—ñ–¥—Å—É—Ç–Ω—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è**: GUI –Ω–µ —Å—Ç–≤–æ—Ä—é–≤–∞–≤ –∞–¥—Ä–µ—Å—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
3. **–ü–æ–º–∏–ª–∫–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞**: –ü—Ä–∏ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ –∞–¥—Ä–µ—Å –º–∞–π–Ω—ñ–Ω–≥ –∑—É–ø–∏–Ω—è–≤—Å—è

#### –†—ñ—à–µ–Ω–Ω—è
**–ó–º—ñ–Ω–∞ –≤ `src/qt/miningdialog.cpp` —Ñ—É–Ω–∫—Ü—ñ—è `startMining()`**:

**–ë–£–õ–û**:
```cpp
// Get mining address
auto addresses = walletModel->wallet().getAddresses();
QString miningAddress;

for (const auto& addr : addresses) {
    if (addr.purpose == wallet::AddressPurpose::RECEIVE) {
        miningAddress = QString::fromStdString(EncodeDestination(addr.dest));
        break;
    }
}

if (miningAddress.isEmpty()) {
    logMessage(tr("ERROR: No receiving addresses found in wallet!"));
    stopMining();
    return;
}
```

**–°–¢–ê–õ–û**:
```cpp
// Get or create mining address
QString miningAddress;

// First, try to get existing receiving address
auto addresses = walletModel->wallet().getAddresses();
for (const auto& addr : addresses) {
    if (addr.purpose == wallet::AddressPurpose::RECEIVE) {
        miningAddress = QString::fromStdString(EncodeDestination(addr.dest));
        logMessage(tr("Found existing address: %1").arg(miningAddress));
        break;
    }
}

// If no existing address found, create a new one
if (miningAddress.isEmpty()) {
    logMessage(tr("No existing addresses found. Creating new mining address..."));
    auto new_addr = walletModel->wallet().getNewDestination(OutputType::LEGACY, "mining");
    if (new_addr) {
        miningAddress = QString::fromStdString(EncodeDestination(*new_addr));
        logMessage(tr("Created new legacy address: %1").arg(miningAddress));
    } else {
        logMessage(tr("ERROR: Failed to create new mining address"));
        stopMining();
        return;
    }
}
```

#### –ö—Ä–æ–∫–∏ –Ü–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—ó
1. **–ê–Ω–∞–ª—ñ–∑ –∫–æ–¥—É**: –ó–Ω–∞–π–¥–µ–Ω–æ –ø—Ä–æ–±–ª–µ–º–Ω—É –ª–æ–≥—ñ–∫—É –≤ `MiningDialog::startMining()`
2. **–ú–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ª–æ–≥—ñ–∫–∏**: –î–æ–¥–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–¥—Ä–µ—Å–∏
3. **Fallback –º–µ—Ö–∞–Ω—ñ–∑–º**: –°–ø–æ—á–∞—Ç–∫—É –ø–æ—à—É–∫ —ñ—Å–Ω—É—é—á–æ—ó, –ø–æ—Ç—ñ–º —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ—ó
4. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**: –ü–µ—Ä–µ–∫–æ–º–ø—ñ–ª—è—Ü—ñ—è —Ç–∞ –∑–∞–ø—É—Å–∫ GUI

#### –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∞–¥—Ä–µ—Å –≤ –≥–∞–º–∞–Ω—Ü—ñ
./src/bitcoin-cli listreceivedbyaddress 0 true
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –ó–Ω–∞–π–¥–µ–Ω–æ 19 –∞–¥—Ä–µ—Å (legacy —Ç–∞ SegWit)

# –ö–æ–º–ø—ñ–ª—è—Ü—ñ—è
make -j8
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –£—Å–ø—ñ—à–Ω–∞ –∑–±—ñ—Ä–∫–∞

# –ó–∞–ø—É—Å–∫ GUI
./src/qt/bitcoin-qt -datadir=/Users/serbinov/.krepto &
# –†–µ–∑—É–ª—å—Ç–∞—Ç: GUI –∑–∞–ø—É—â–µ–Ω–∏–π —Ç–∞ –≥–æ—Ç–æ–≤–∏–π –¥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
```

#### –ü–µ—Ä–µ–≤–∞–≥–∏ –†—ñ—à–µ–Ω–Ω—è
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–¥—Ä–µ—Å**: GUI —Å—Ç–≤–æ—Ä—é—î –∞–¥—Ä–µ—Å—É —è–∫—â–æ —ó—ó –Ω–µ–º–∞—î
- ‚úÖ **Fallback –ª–æ–≥—ñ–∫–∞**: –°–ø–æ—á–∞—Ç–∫—É –ø–æ—à—É–∫ —ñ—Å–Ω—É—é—á–æ—ó, –ø–æ—Ç—ñ–º —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ—ó
- ‚úÖ **Legacy –∞–¥—Ä–µ—Å–∏**: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è OutputType::LEGACY –¥–ª—è —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è**: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏—Ç—å —â–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è
- ‚úÖ **–ú—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–∏**: –ó–±–µ—Ä–µ–∂–µ–Ω–æ —ñ—Å–Ω—É—é—á—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É

#### –ê–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è –ú–∞–π–±—É—Ç–Ω—å–æ–≥–æ
```cpp
QString getMiningAddress(WalletModel* walletModel) {
    // 1. –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –∑–Ω–∞–π—Ç–∏ —ñ—Å–Ω—É—é—á—É –∞–¥—Ä–µ—Å—É
    auto addresses = walletModel->wallet().getAddresses();
    for (const auto& addr : addresses) {
        if (addr.purpose == wallet::AddressPurpose::RECEIVE) {
            return QString::fromStdString(EncodeDestination(addr.dest));
        }
    }
    
    // 2. –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É –∞–¥—Ä–µ—Å—É —è–∫—â–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ
    auto new_addr = walletModel->wallet().getNewDestination(OutputType::LEGACY, "mining");
    if (new_addr) {
        return QString::fromStdString(EncodeDestination(*new_addr));
    }
    
    // 3. –ü–æ–≤–µ—Ä–Ω—É—Ç–∏ –ø–æ—Ä–æ–∂–Ω—é —Å—Ç—Ä–æ–∫—É –ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ
    return QString();
}
```

---